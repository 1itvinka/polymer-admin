<link rel="import" href="../../../../bower_components/polymer/polymer.html">

<dom-module id="pa-todo-model">
  <template>
    <iron-localstorage name="todos-polymer" value="{{items}}" on-iron-localstorage-load-empty="initializeDefaultTodos"></iron-localstorage>
  </template>
  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'pa-todo-model',
        properties: {
          items: {
            type: Array,
            notify: true
          },
          filter: String
        },

        initializeDefaultTodos: function() {
          this.items = [
            {
              title: 'Learn Polymer',
              completed: false
            },
            {
              title: 'Add toastr notifications',
              completed: false
            },
            {
              title: 'Add login functionality',
              completed: false
            },
            {
              title: 'Add subnav',
              completed: false
            },
            {
              title: 'Add toggle menu button',
              completed: false
            }
          ];
        },

        newItem: function(title) {
          title = String(title).trim();

          if (!title) {
            return;
          }

          this.unshift('items', {
            title: title,
            completed: false
          });
        },

        destroyItem: function(item) {
          var i = this.items.indexOf(item);
          i !== -1 && this.splice('items', i, 1);
        }
      });
    })();
  </script>
</dom-module>
